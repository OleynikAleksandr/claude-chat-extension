# Тестирование Claude Chat Extension v0.2.8

## Базовая функциональность (MVP)

### 1. Обнаружение Claude CLI
- ✅ **Реализовано**: Многоуровневое обнаружение Claude CLI в терминалах
- **Методы**:
  - По названию терминала (содержит "claude", "claude-cli", "claude-code")
  - По пути к shell или переменным окружения
  - По настройкам создания терминала

### 2. Отправка сообщений в терминал
- ✅ **Реализовано**: Специальный метод `sendMessageToClaudeCli()`
- **Логика**:
  - Поиск терминала с Claude CLI
  - Fallback на активный терминал с подтверждением пользователя
  - Retry механизм при ошибках
  - Comprehensive error handling

### 3. Команды для тестирования

#### Через Command Palette (Ctrl+Shift+P):
1. `Claude Chat: Show Terminal Status` - показать статус терминалов
2. `Claude Chat: Quick Send` - быстрая отправка сообщения
3. `Claude Chat: Open Chat Panel` - открыть панель чата

#### Через горячие клавиши:
- `Ctrl+Shift+C` - открыть чат
- `Ctrl+Shift+Enter` - быстрая отправка
- `Ctrl+Shift+T` - переключить панель

## Инструкция по тестированию

### Шаг 1: Установка
1. Установить расширение: `code --install-extension claude-chat-0.2.8.vsix`
2. Перезапустить VS Code

### Шаг 2: Подготовка терминала
1. Открыть терминал в VS Code
2. Запустить Claude Code CLI: `claude` (если установлен)
3. Или переименовать терминал, добавив "claude" в название

### Шаг 3: Тестирование обнаружения
1. Выполнить команду: `Claude Chat: Show Terminal Status`
2. Проверить:
   - ✅ Активный терминал: Да
   - ✅ Claude CLI запущен: Да (если Claude CLI действительно запущен)
   - ✅ Имя терминала: отображается корректно

### Шаг 4: Тестирование отправки сообщений
1. Открыть чат: `Ctrl+Shift+C`
2. Ввести тестовое сообщение: "Привет, Claude!"
3. Нажать "Отправить" или Enter
4. **Ожидаемый результат**: Сообщение появится в терминале

### Шаг 5: Тестирование fallback логики
1. Закрыть все терминалы с Claude CLI
2. Оставить только обычный терминал
3. Попробовать отправить сообщение
4. **Ожидаемый результат**: Появится диалог с вопросом об использовании активного терминала

## Проверочный список (MVP)

- [ ] Расширение активируется без ошибок
- [ ] Команда статуса показывает корректную информацию
- [ ] Чат интерфейс открывается и отображается корректно
- [ ] Сообщения отправляются в терминал с Claude CLI
- [ ] Fallback на активный терминал работает с подтверждением
- [ ] Error handling работает корректно
- [ ] Все горячие клавиши функционируют

## Известные ограничения v0.2.8

1. **Обнаружение Claude CLI**: Базируется на эвристических методах (название, путь)
2. **Захват вывода**: Пока не реализован захват ответов Claude из терминала
3. **Интерактивное обнаружение**: Метод `detectClaudeCliInteractive` требует доработки

## Следующие шаги

1. Улучшить точность обнаружения Claude CLI
2. Добавить захват ответов Claude из терминала  
3. Реализовать history чата с ответами
4. Добавить индикаторы активности в UI